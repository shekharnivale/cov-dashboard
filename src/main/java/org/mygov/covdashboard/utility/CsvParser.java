package org.mygov.covdashboard.utility;import com.opencsv.bean.CsvToBeanBuilder;import lombok.extern.slf4j.Slf4j;import org.mygov.covdashboard.exception.CovDashBoardException;import org.mygov.covdashboard.model.CSVDataModel;import org.slf4j.Logger;import org.slf4j.LoggerFactory;import org.springframework.http.HttpStatus;import org.springframework.stereotype.Component;import java.io.IOException;import java.io.StringReader;import java.net.URI;import java.net.http.HttpClient;import java.net.http.HttpRequest;import java.net.http.HttpResponse;import java.util.List;@Componentpublic class CsvParser {	private static final Logger LOGGER = LoggerFactory.getLogger(CsvParser.class);	public List<CSVDataModel> buildCsvDataModel(String URL) throws CovDashBoardException {		LOGGER.info("Parsing csv file at " + URL);		try {			HttpClient client = HttpClient.newHttpClient();			HttpRequest request = HttpRequest.newBuilder()					.uri(URI.create(URL))					.build();			HttpResponse<String> httpResponse = client.send(request, HttpResponse.BodyHandlers.ofString());			if(httpResponse.statusCode() != HttpStatus.OK.value()) {				throw new CovDashBoardException("No data available at specific URL " + URL);			}			List<CSVDataModel> modelList = new CsvToBeanBuilder(new StringReader(httpResponse.body()))					.withType(CSVDataModel.class).build().parse();			modelList.remove(0) ; // Removing heading row			return modelList;		} catch (IOException | InterruptedException e) {			throw new CovDashBoardException("Error while extracting data at URL " + URL + ". Error : " + e.getMessage());		}	}}